{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["`use strict`;\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const imgList = document.querySelector(`.img-list`);\n\nexport function render(images) {\n  const markup = images.hits\n    .map(images => {\n      return `<li class=\"list-item\"><a href=\"${images.largeImageURL}\" class=\"list-item-link\">\n      <img class=\"list-item-img\" src=\"${images.webformatURL}\" alt=\"${images.tags}\"></a>\n      <div class=\"list-item-description\">\n        <h2 class=\"description-name\">Likes\n          <p class=\"description-value\">${images.likes}</p>\n        </h2>\n        <h2 class=\"description-name\">Views \n          <p class=\"description-value\">${images.views}</p>\n        </h2>\n        <h2 class=\"description-name\">Comments \n          <p class=\"description-value\">${images.comments}</p>\n        </h2>\n        <h2 class=\"description-name\">Downloads \n          <p class=\"description-value\">${images.downloads}</p>\n        </h2>\n      </div>\n    </li>`;\n    })\n    .join(``);\n\n  imgList.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.list-item a', {\n    captionDelay: 250,\n    captionSelector: 'img',\n    captionsData: 'alt',\n    scrollZoom: false,\n    fadeSpeed: 1000,\n  });\n  lightbox.refresh();\n}\n","`use strict`;\nimport { imgList } from './render-functions.js';\nimport { page, limit } from '../main.js';\nimport axios from 'axios';\n\nexport const input = document.querySelector(`.input`);\n\nexport async function fetchOn() {\n  let correctInput = input.value.split(' ').join('+');\n\n  const searchParams = new URLSearchParams({\n    key: `42405110-7b28ad03e73a48ed950cc828f`,\n    q: correctInput,\n    image_type: `photo`,\n    orientation: `horizontal`,\n    per_page: limit,\n    page: page,\n  });\n\n  imgList.innerHTML = '';\n\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n\n  return response.data;\n}\n","`use strict`;\n\nimport { input, fetchOn } from './js/pixabay-api';\nimport { render } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// /iziToast\n\nconst form = document.querySelector(`.form`);\nexport const btnLoad = document.querySelector(`.btn-load`);\nexport const loader = document.querySelector('.loader');\n\nexport let page = 1;\nexport let limit = 15;\nconst totalPages = Math.ceil(100 / limit);\n\nform.addEventListener(`submit`, formSearch);\n\nasync function formSearch(event) {\n  const inputTrim = input.value.trim();\n  if (inputTrim === ``) {\n    event.preventDefault();\n    form.reset();\n    return;\n  }\n  event.preventDefault();\n\n  try {\n    const posts = await fetchOn();\n    render(posts);\n    loader.classList.remove('hidden');\n    btnLoad.classList.remove('hidden');\n    if (posts.hits.length === 0) {\n      btnLoad.classList.add('hidden');\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    setTimeout(() => {\n      loader.classList.add('hidden');\n    }, 1200);\n  } catch (error) {\n    console.log(error);\n  }\n\n  form.reset();\n}\n\nbtnLoad.addEventListener(`click`, loadMore);\n\nasync function loadMore() {\n  page += 1;\n  if (page > totalPages) {\n    iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    btnLoad.classList.add('hidden');\n    return;\n  }\n  await fetchOn();\n  render(posts);\n}\n"],"names":["imgList","render","images","markup","SimpleLightbox","input","fetchOn","correctInput","searchParams","limit","page","axios","form","btnLoad","loader","totalPages","formSearch","event","posts","iziToast","error","loadMore"],"mappings":"owBAKO,MAAMA,EAAU,SAAS,cAAc,WAAW,EAElD,SAASC,EAAOC,EAAQ,CAC7B,MAAMC,EAASD,EAAO,KACnB,IAAIA,GACI,kCAAkCA,EAAO,aAAa;AAAA,wCAC3BA,EAAO,YAAY,UAAUA,EAAO,IAAI;AAAA;AAAA;AAAA,yCAGvCA,EAAO,KAAK;AAAA;AAAA;AAAA,yCAGZA,EAAO,KAAK;AAAA;AAAA;AAAA,yCAGZA,EAAO,QAAQ;AAAA;AAAA;AAAA,yCAGfA,EAAO,SAAS;AAAA;AAAA;AAAA,UAIpD,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaG,CAAM,EAC7B,IAAIC,EAAe,eAAgB,CAClD,aAAc,IACd,gBAAiB,MACjB,aAAc,MACd,WAAY,GACZ,UAAW,GACf,CAAG,EACQ,QAAO,CAClB,CClCO,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EAE7C,eAAeC,GAAU,CAC9B,IAAIC,EAAeF,EAAM,MAAM,MAAM,GAAG,EAAE,KAAK,GAAG,EAElD,MAAMG,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,SAAUE,EACV,KAAMC,CACV,CAAG,EAED,OAAAV,EAAQ,UAAY,IAEH,MAAMW,EAAM,IAAI,4BAA4BH,CAAY,EAAE,GAE3D,IAClB,CChBA,MAAMI,EAAO,SAAS,cAAc,OAAO,EAC9BC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIJ,EAAO,EACPD,EAAQ,GACnB,MAAMM,EAAa,KAAK,KAAK,IAAMN,CAAK,EAExCG,EAAK,iBAAiB,SAAUI,CAAU,EAE1C,eAAeA,EAAWC,EAAO,CAE/B,GADkBZ,EAAM,MAAM,KAAI,IAChB,GAAI,CACpBY,EAAM,eAAc,EACpBL,EAAK,MAAK,EACV,MACD,CACDK,EAAM,eAAc,EAEpB,GAAI,CACF,MAAMC,EAAQ,MAAMZ,IACpBL,EAAOiB,CAAK,EACZJ,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,UAAU,OAAO,QAAQ,EAC7BK,EAAM,KAAK,SAAW,IACxBL,EAAQ,UAAU,IAAI,QAAQ,EAC9BM,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,GAGH,WAAW,IAAM,CACfL,EAAO,UAAU,IAAI,QAAQ,CAC9B,EAAE,IAAI,CACR,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDR,EAAK,MAAK,CACZ,CAEAC,EAAQ,iBAAiB,QAASQ,CAAQ,EAE1C,eAAeA,GAAW,CAExB,GADAX,GAAQ,EACJA,EAAOK,EAAY,CACrBI,EAAS,MAAM,CACb,SAAU,WACV,QAAS,4DACf,CAAK,EACDN,EAAQ,UAAU,IAAI,QAAQ,EAC9B,MACD,CACD,MAAMP,EAAO,EACbL,EAAO,KAAK,CACd"}